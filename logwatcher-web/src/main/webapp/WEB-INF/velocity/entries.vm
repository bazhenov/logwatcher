#* @vtlvariable name="p" type="com.farpost.logwatcher.web.controller.FeedController.DetailsPage" *#
<html>
<head>
	<title>LogWatcher: detailed information for entry</title>

	<link rel="stylesheet" type="text/css" href="/css/log.css"/>
	<link rel="stylesheet" type="text/css" href="/css/datepicker.css"/>

	<script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="/js/events.detailed-view.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/bootstrap-datepicker.js"></script>

</head>

<body>

<h2 data-checksum="${p.cluster.checksum}" data-application="$p.cluster.applicationId">
	$display.truncate($p.cluster.title, 90, "...", true)</h2>

<!-- Button to trigger modal
<a id="editModalButton"
	 href="#editModal" role="button" class="btn btn-small" data-toggle="modal">Edit <i class="icon-edit"></i></a>
 -->
<p>
	<a href="/feed/$p.cluster.applicationId">&larr; Back</a> to $p.cluster.applicationId
</p>

<h3>Statistics</h3>

<p class="section">
	Today: $p.statistics.todayCount times. Yesterday: $p.statistics.yesterdayCount times.
	Last seen: $date.format("dd MMMM, HH:mm:ss", $p.statistics.lastSeenAt.toDate())
</p>

<table id="statisticsTable">
	<tr>
		<td id="minuteStatistics"></td>
		<td id="dayStatistics"></td>
	</tr>
</table>

<!--
<div id="editModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editModalLabel"
		 aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
		<h3 id="editModalLabel">Edit cluster</h3>
	</div>
	<div class="modal-body">
		<form class="form-horizontal">
			<div class="control-group">
				<label class="control-label" for="clusterTitle">Title</label>

				<div class="controls">
					<input type="text" id="clusterTitle" name="clusterTitle" placeholder="Title" class="input-xlarge"
								 value="$p.cluster.title">
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="clusterIssueKey">Issue key</label>

				<div class="controls">
					<input type="text" id="clusterIssueKey" name="clusterIssueKey" class="input-small" placeholder="Issue key">
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
		<button class="btn btn-primary">Save changes</button>
	</div>
</div>
Modal -->

<h3>Context Sampling</h3>

<div id="attributesContainer" class="section">
	<div class="spinner"></div>
</div>

	#if($p.cluster.description)
	<h3>Description</h3>

	<p class="section">No description given</p>
	#end

<h3>Log samples</h3>

<div class="log section">
	<div class="input-append date">
		<input id="datePicker" class="input-small" type="text" value='$date.format("yyyy-MM-dd", $date.date)'
					 data-date-format="yyyy-mm-dd"/>
		<button id="showLog" class="btn" type="button">Show!</button>
	</div>
	<div id="logSamples"></div>
</div>
</body>
</html>